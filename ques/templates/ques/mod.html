{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
    Modifikationsauswahl
{% endblock %}
{% block scripts %}
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"> </script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>
<script language="javascript" type="text/javascript">



  function allowDropm(ev) {
    ev.preventDefault();
} 
  function allowDropm1(ev) {
    ev.preventDefault();
}
  function allowDropm2(ev,ee) {
    ev.preventDefault();
    ee.preventDefault();
}
  function allowDropm3(ev) {
    ev.preventDefault();
}
  function allowDropm4(ev) {
    ev.preventDefault();
}

function dragm(ev) {
  Value = ev.target.id;
  Value = Value + ",itemsm";
  ev.dataTransfer.setData("text", Value);
}
function dragm1(ev) {
  Value = document.getElementById("m1").value;
  Value = Value + ",m1";
  ev.dataTransfer.setData("text", Value);
}

function dragm2(ev) {
  Value = document.getElementById("m2").value;
  Value = Value + ",m2";
  ev.dataTransfer.setData("text", Value);
}
function dragm3(ev) {
  Value = document.getElementById("m3").value;
  Value = Value + ",m3";
  ev.dataTransfer.setData("text", Value);
}
function dragm4(ev) {
  Value = document.getElementById("m4").value;
  Value = Value + ",m4";
  ev.dataTransfer.setData("text", Value);;
}

function dropm(ev) {
  ev.preventDefault();
  var data = ev.dataTransfer.getData("text");
  var data = data.split(",", 2);
  var data1 = data[0];
  var id1 = data[data.length-1];
  $( '#' + id1 ).val('');
  if (id1!="itemsm"){
  $( '#itemsm' ).append( '<span draggable="true" style="background-color: #38cb84" class="pad" ondragstart="drag(event)"" id="' + data1 + '"><mark>' + data1 + '</mark></span>&nbsp;' );
  $( '#' + id1 ).css("background-color", "transparent");
  }
}

function dropm1(ev) {
  ev.preventDefault();
  Value = document.getElementById("m1").value;
  var data = ev.dataTransfer.getData("text");
  var data = data.split(",", 2);
  var id1 = data[data.length-1];
  if (id1!='itemsm') {
    $( '#' + id1 ).append( Value );
    $( '#' + id1 ).val(Value);
     if($('#m1').val().length==0) { // zero-length string AFTER a trim
            $( '#' + id1 ).css("background-color", "transparent");
     }
  } 
  else {
        if($('#m1').val().length>0) { // zero-length string AFTER a trim
            $( '#itemsm' ).append( '<span draggable="true" style="background-color: #38cb84" class="pad" ondragstart="drag(event)"" id="' + Value + '"><mark>' + Value + '</mark></span>&nbsp;' );
     }
    }
  var data = data[0];
  ev.target.appendChild(document.getElementById(data));
  console.log(Value=data);
  document.getElementById("m1").value = Value;
  $('#m1').css("background-color", "#38cb84");
}
function dropm2(ev) {
  ev.preventDefault();
  Value = document.getElementById("m2").value;
  var data = ev.dataTransfer.getData("text");
  var data = data.split(",", 2);
  var id1 = data[data.length-1];
   if (id1!='itemsm') {
    $( '#' + id1 ).append( Value );
    $( '#' + id1 ).val(Value);
    if($('#m2').val().length==0) { // zero-length string AFTER a trim
            $( '#' + id1 ).css("background-color", "transparent");
     }
  } 
  else {
        if($('#m2').val().length>0) { // zero-length string AFTER a trim
            $( '#itemsm' ).append( '<span draggable="true" style="background-color: #38cb84" class="pad" ondragstart="drag(event)"" id="' + Value + '"><mark>' + Value + '</mark></span>&nbsp;' );
     }
    }
  var data = data[0];
  ev.target.appendChild(document.getElementById(data));
  console.log(Value=data);
  document.getElementById("m2").value = Value;
  $('#m2').css("background-color", "#38cb84");
}
function dropm3(ev) {
  ev.preventDefault();
  Value = document.getElementById("m3").value;
  var data = ev.dataTransfer.getData("text");
  var data = data.split(",", 2);
  var id1 = data[data.length-1];
   if (id1!='itemsm') {
    $( '#' + id1 ).append( Value );
    $( '#' + id1 ).val(Value);
    if($('#m3').val().length==0) { // zero-length string AFTER a trim
            $( '#' + id1 ).css("background-color", "transparent");
     }
  } 
  else {
        if($('#m3').val().length>0) { // zero-length string AFTER a trim
            $( '#itemsm' ).append( '<span draggable="true" style="background-color: #38cb84" class="pad" ondragstart="drag(event)"" id="' + Value + '"><mark>' + Value + '</mark></span>&nbsp;' );
     }
    }
  var data = data[0];
  ev.target.appendChild(document.getElementById(data));
  console.log(Value=data);
  document.getElementById("m3").value = Value;
  $('#m3').css("background-color", "#38cb84");
}
function dropm4(ev) {
  ev.preventDefault();
  Value = document.getElementById("m4").value;
  var data = ev.dataTransfer.getData("text");
  var data = data.split(",", 2);
  var id1 = data[data.length-1];
   if (id1!='itemsm') {
    $( '#' + id1 ).append( Value );
    $( '#' + id1 ).val(Value);
    if($('#m4').val().length==0) { // zero-length string AFTER a trim
            $( '#' + id1 ).css("background-color", "transparent");
     }
  } 
  else {
        if($('#m4').val().length>0) { // zero-length string AFTER a trim
            $( '#itemsm' ).append( '<span draggable="true" style="background-color: #38cb84" class="pad" ondragstart="drag(event)"" id="' + Value + '"><mark>' + Value + '</mark></span>&nbsp;' );
     }
    }
  var data = data[0];
  ev.target.appendChild(document.getElementById(data));
  console.log(Value=data);
  document.getElementById("m4").value = Value;
  $('#m4').css("background-color", "#38cb84");
}

$('#m1').keypress(function(e) {
    e.preventDefault();
});
$("#m1").on('keydown',  function(event){
  var key = event.charCode || event.keyCode || event.which;// alert (key);
  var char = String.fromCharCode(event.key);
  if( key === 8 || key=== 46 ){
    event.preventDefault();
    return false;
  } else {    
    $("#m1").append(char);
  }
});
$('#m2').keypress(function(e) {
    e.preventDefault();
});
$("#m2").on('keydown',  function(event){
  var key = event.charCode || event.keyCode || event.which;// alert (key);
  var char = String.fromCharCode(event.key);
  if( key === 8 || key=== 46 ){
    event.preventDefault();
    return false;
  } else {    
    $("#m2").append(char);
  }
});
$('#m3').keypress(function(e) {
    e.preventDefault();
});
$("#m3").on('keydown',  function(event){
  var key = event.charCode || event.keyCode || event.which;// alert (key);
  var char = String.fromCharCode(event.key);
  if( key === 8 || key=== 46 ){
    event.preventDefault();
    return false;
  } else {    
    $("#m3").append(char);
  }
});
$('#m4').keypress(function(e) {
    e.preventDefault();
});
$("#m4").on('keydown',  function(event){
  var key = event.charCode || event.keyCode || event.which;// alert (key);
  var char = String.fromCharCode(event.key);
  if( key === 8 || key=== 46 ){
    event.preventDefault();
    return false;
  } else {    
    $("#m4").append(char);
  }
});


</script>
  {% endblock %}
{% block styles %}
  <style type="text/css">
#itemsm{
    height:50px;
    width:100%;
    margin-bottom: 30px;
  }



.decm{
    font-size: 20px;
    position: absolute;
    top: 10%;
    left: 0%;
    width:75%;
    border-style: solid;
    padding-top:10px;
    padding-left:20px;
    padding-bottom:40px;
    padding-right:40px;
}
.boxm{
  position:relative;
  height: 450px;
}
  .padm{
    
  }
 .a{
        padding-top: 10px ;
        padding-bottom: 10px ;
    }
.b{
        padding-top: 10px ;
        padding-bottom: 10px ;
    }
.c{
        padding-top: 10px ;
        padding-bottom: 40px ;
    }
.cont{
        padding-top: 50px ;
        padding-bottom: 50px ;
    }
.d{
        padding-top: 10px ;
        padding-bottom: 10px ;
    }
.e{
        padding-top: 60px ;
    }
.f{
        padding-top: 60px ;
        padding-bottom: 10px ;
    }
.g{
        padding-top: 10px ;
        padding-bottom: 10px ;
    }
.h{
        padding-top: 10px ;
    }
.j{
        padding-bottom: 1px ;
    }
.i{
        padding-top: 10px ;
        padding-bottom: 10px ;
    }
tr.border td {
  border: thin solid black;
}

* {
    font-size: 17px;/* <-- fonts */
}
img.im1 {
  max-width:100%;
  max-height:100%;
}
img.im2 {
  max-width:100%;
  max-height:100%;
}
img.im3 {
  max-width:100%;
  max-height:100%;
}
img.im4 {
  max-width:100%;
  max-height:100%;
}
  img.im5 {
  max-width:60%;
  max-height:60%;
}
  img.im6 {
  max-width:90%;
  max-height:90%;
}
  img.im7 {
  max-width:100%;
  max-height:100%;
}
  img.im9 {
  max-width:35%;
  max-height:35%;
}
  img.im10 {
  max-width:13%;
  max-height:13%;
}
img.im11 {
  max-width:80%;
  max-height:80%;
}
img.im12 {
  max-width:80%;
  max-height:80%;
}
img.im13 {
  max-width:80%;
  max-height:80%;
}
img.im14 {
  max-width:80%;
  max-height:80%;
}

#button {
  background-color:#4f75ff;
  border-color:#4f75ff;
  }
  #button:hover {
  background-color:#3c5ccf;
  }
  #button:focus {
    outline: 0;
    box-shadow: 0 0 4px blue;
  }
  </style>
{% endblock %}

{% block content %}

<p><b></b>    <strong>Modifikation Zusatzaufgabe</strong><br></p>
<div class=a>
<p align="justify"> Bezüglich der Zusatzaufgabe werden ihre <strong>Angaben aus {% if player.week == 0 %}Termin 1{% else %}Termin 2{% endif %} relevant</strong>. Aus diesen Angaben wurde zufällig ausgewählt, dass Sie <strong>{{ player.workload }} Aufgaben</strong> bearbeiten würden und dafür <strong>{{ player.paywork }}€ pro Aufgabe</strong> ausgezahlt bekämen. Ob Sie die Zusatzaufgabe bearbeiten werden, wird auf der folgenden Seite entschieden. Zuvor bitten wir Sie noch eine weitere Entscheidung bezüglich der Zusatzaufgabe zu treffen: <br>
Ähnlich zu der Umweltaufgabe, gibt es bei der Zusatzaufgabe auch wieder verschiedene Bearbeitungsmöglichkeiten (Modifikationen). Die Modifikationen werden in der unteren Tabelle kurz vorgestellt<br><br>
</p>
<table border=0 class="centerTable" width = "100%">
        <tbody>
            <tr class="border">
              <td width="15%" style="vertical-align:top;"><strong>Modifikation 1:</strong></td>
              <td width="40%" style="vertical-align:top;"><p align="justify" >
                {% if participant.vars.noincm == 1 %}Sie bearbeiten die Aufgaben wie beschrieben ohne weitere Besonderheiten.
                {% elif participant.vars.nudgem == 1 %}Sie können Ihre eigene Performance jederzeit mit der der anderen Teilnehmenden vergleichen, indem angezeigt wird, wie viele Aufgaben der Durchschnitt und die bestern 25 Prozent zu diesem Zeitpunkt bereits bearbeitet haben.
                {% elif participant.vars.monm == 1 %}Sie starten mit einem negativen Betrag von {{ participant.vars.pun }}€. Für jede Aufgabe, die Sie unter 45 Sekunden bearbeiten, erhalten Sie einen Bonus in Höhe von {{ participant.vars.reward }}€. Falls Sie also 2/3 der Aufgaben unter der vorgegebenen Zeit korrekt beantworten, zahlt sich der Bonus für Sie aus.
                {% elif participant.vars.punishm == 1 %}Sie starten mit einem negativen Betrag von {{ participant.vars.pun }}€. Wenn Sie mindestens 1/3 der Aufgaben unter 45 Sekunden lösen, wird Ihnen der Betrag wieder gutgeschrieben und Sie fahren fort als hätten Sie die Zusatzaufgabe ohne jegliche Modifikation bearbeitet. Falls Sie dies nicht schaffen, wird Ihnen der Betrag von {{ participant.vars.pun }}€ vom Gesamtverdienst dieser Studie abgezogen.
                {% endif %}
                <br></p></td>  
              <td width="30%" style="text-align:right;">{% if participant.vars.noincm == 1 %}<img class=im11 src="{% static "pebs/noinc_work.png" %}" />
                {% elif participant.vars.nudgem == 1 %}<img class=im10 src="{% static "pebs/happy.png" %}" /><img style="vertical-align:bottom;" class=im12 src="{% static "pebs/nudge_work1.png" %}" />
                {% elif participant.vars.monm == 1 %}<img class=im13 src="{% static "pebs/mon_work1.png" %}" />
                {% elif participant.vars.punishm == 1 %}<img class=im14 src="{% static "pebs/punish_work.png" %}" />
                {% endif %}
                <br></p></td>  
            </tr>
            <tr class="border">
              <td width="15%"  style="vertical-align:top;"><strong>Modifikation 2:</strong></td>
              <td width="35%" style="vertical-align:top;"><p align="justify">{% if participant.vars.noincm == 2 %}Sie bearbeiten die Aufgaben wie beschrieben ohne weitere Besonderheiten.
                {% elif participant.vars.nudgem == 2 %}Sie können Ihre eigene Performance jederzeit mit der der anderen Teilnehmenden vergleichen, indem angezeigt wird, wie viele Aufgaben der Durchschnitt und die bestern 25 Prozent zu diesem Zeitpunkt bereits bearbeitet haben.
                {% elif participant.vars.monm == 2 %}Sie starten mit einem negativen Betrag von {{ participant.vars.pun }}€. Für jede Aufgabe, die Sie unter 45 Sekunden bearbeiten, erhalten Sie einen Bonus in Höhe von {{ participant.vars.reward }}€. Falls Sie also 2/3 der Aufgaben unter der vorgegebenen Zeit korrekt beantworten, zahlt sich der Bonus für Sie aus.
                {% elif participant.vars.punishm == 2 %}Sie starten mit einem negativen Betrag von {{ participant.vars.pun }}€. Wenn Sie mindestens 1/3 der Aufgaben unter 45 Sekunden lösen, wird Ihnen der Betrag wieder gutgeschrieben und Sie fahren fort als hätten Sie die Zusatzaufgabe ohne jegliche Modifikation bearbeitet. Falls Sie dies nicht schaffen, wird Ihnen der Betrag von {{ participant.vars.pun }}€ vom Gesamtverdienst dieser Studie abgezogen.
                {% endif %}<br></p></td>  
              <td  width="35%" style="text-align:right;">{% if participant.vars.noincm == 2 %}<img class=im11 src="{% static "pebs/noinc_work.png" %}" />
                {% elif participant.vars.nudgem == 2 %}<img class=im10 src="{% static "pebs/happy.png" %}" /><img style="vertical-align:bottom;" class=im12 src="{% static "pebs/nudge_work1.png" %}" />
                {% elif participant.vars.monm == 2 %}<img class=im13 src="{% static "pebs/mon_work1.png" %}" />
                {% elif participant.vars.punishm == 2 %}<img class=im14 src="{% static "pebs/punish_work.png" %}" />
                {% endif %}</td>
            </tr>
            <tr class="border">
              <td style="vertical-align:top;"><strong>Modifikation 3:</strong></td>
              <td style="vertical-align:top;"><p align="justify">{% if participant.vars.noincm == 3 %}Sie bearbeiten die Aufgaben wie beschrieben ohne weitere Besonderheiten.
                {% elif participant.vars.nudgem == 3 %}Sie können Ihre eigene Performance jederzeit mit der der anderen Teilnehmenden vergleichen, indem angezeigt wird, wie viele Aufgaben der Durchschnitt und die bestern 25 Prozent zu diesem Zeitpunkt bereits bearbeitet haben.
                {% elif participant.vars.monm == 3 %}Sie starten mit einem negativen Betrag von {{ participant.vars.pun }}€. Für jede Aufgabe, die Sie unter 45 Sekunden bearbeiten, erhalten Sie einen Bonus in Höhe von {{ participant.vars.reward }}€. Falls Sie also 2/3 der Aufgaben unter der vorgegebenen Zeit korrekt beantworten, zahlt sich der Bonus für Sie aus.
                {% elif participant.vars.punishm == 3 %}Sie starten mit einem negativen Betrag von {{ participant.vars.pun }}€. Wenn Sie mindestens 1/3 der Aufgaben unter 45 Sekunden lösen, wird Ihnen der Betrag wieder gutgeschrieben und Sie fahren fort als hätten Sie die Zusatzaufgabe ohne jegliche Modifikation bearbeitet. Falls Sie dies nicht schaffen, wird Ihnen der Betrag von {{ participant.vars.pun }}€ vom Gesamtverdienst dieser Studie abgezogen.
                {% endif %}<br></p></td>  
              <td style="text-align:right;">{% if participant.vars.noincm == 3 %}<img class=im11 src="{% static "pebs/noinc_work.png" %}" />
                {% elif participant.vars.nudgem == 3 %}<img class=im10 src="{% static "pebs/happy.png" %}" /><img style="vertical-align:bottom;" class=im12 src="{% static "pebs/nudge_work1.png" %}" />
                {% elif participant.vars.monm == 3 %}<img class=im13 src="{% static "pebs/mon_work1.png" %}" />
                {% elif participant.vars.punishm == 3 %}<img class=im14 src="{% static "pebs/punish_work.png" %}" />
                {% endif %}</td>
            </tr>
            <tr class="border">
              <td style="vertical-align:top;"><strong>Modifikation 4:</strong></td>
              <td style="vertical-align:top;"><p align="justify">{% if participant.vars.noincm == 4 %}Sie bearbeiten die Aufgaben wie beschrieben ohne weitere Besonderheiten.
                {% elif participant.vars.nudgem == 4 %}Sie können Ihre eigene Performance jederzeit mit der der anderen Teilnehmenden vergleichen, indem angezeigt wird, wie viele Aufgaben der Durchschnitt und die bestern 25 Prozent zu diesem Zeitpunkt bereits bearbeitet haben.
                {% elif participant.vars.monm == 4 %}Sie starten mit einem negativen Betrag von {{ participant.vars.pun }}€. Für jede Aufgabe, die Sie unter 45 Sekunden bearbeiten, erhalten Sie einen Bonus in Höhe von {{ participant.vars.reward }}€. Falls Sie also 2/3 der Aufgaben unter der vorgegebenen Zeit korrekt beantworten, zahlt sich der Bonus für Sie aus.
                {% elif participant.vars.punishm == 4 %}Sie starten mit einem negativen Betrag von {{ participant.vars.pun }}€. Wenn Sie mindestens 1/3 der Aufgaben unter 45 Sekunden lösen, wird Ihnen der Betrag wieder gutgeschrieben und Sie fahren fort als hätten Sie die Zusatzaufgabe ohne jegliche Modifikation bearbeitet. Falls Sie dies nicht schaffen, wird Ihnen der Betrag von {{ participant.vars.pun }}€ vom Gesamtverdienst dieser Studie abgezogen.
                {% endif %}<br></p></td> 
              <td style="text-align:right;">{% if participant.vars.noincm == 4 %}<img class=im11 src="{% static "pebs/noinc_work.png" %}" />
                {% elif participant.vars.nudgem == 4 %}<img class=im10 src="{% static "pebs/happy.png" %}" /><img style="vertical-align:bottom;" class=im12 src="{% static "pebs/nudge_work1.png" %}" />
                {% elif participant.vars.monm == 4 %}<img class=im13 src="{% static "pebs/mon_work1.png" %}" />
                {% elif participant.vars.punishm == 4 %}<img class=im14 src="{% static "pebs/punish_work.png" %}" />
                {% endif %}</td> 
            </tr>
        </tbody>
    </table>
    <br>
Bitte geben Sie nun Ihre Präferenzen bezüglich der Modifikationen an. Je stärker die Präferenz (1. Präferenz am stärksten), desto wahrscheinlicher ist es, dass sie diese Modifikation in der Zusatzaufgabe bearbeiten werden.
<div class="boxm">
<div class="decm">
  <p style="font-size: 13px;">Die Modifikationen bitte durch Drag&Drop in die Felder ziehen</p>
<div id="itemsm" ondrop="dropm(event)" ondragover="allowDropm(event)"  data-max="-1">
    <span id="Modifikation 1"  draggable="true" ondragstart="dragm(event)" class="itemm" ><mark>Modifikation 1</mark></span> 
    <span id="Modifikation 2"  draggable="true" ondragstart="dragm(event)" class="itemm" ><mark>Modifikation 2</mark></span>
    <span id="Modifikation 3"  draggable="true" ondragstart="dragm(event)" class="itemm" ><mark>Modifikation 3</mark></span> 
    <span id="Modifikation 4"  draggable="true" ondragstart="dragm(event)" class="itemm" ><mark>Modifikation 4</mark></span> 
    </div>

    <table class="centerTable" style="border-collapse: collapse; border-style: hidden;"  width = "50%">
         <thead>
            <tr>
                <td>1. Präferenz</td>
            <td valign="center" align="center" width="58%">
            <input type="text" name="eins"  id="m1" draggable="true" ondragstart="dragm1(event)" class='container' ondrop="dropm1(event)" ondragover="allowDropm1(event)"  style="border-style: solid;" data-max="1"></td>
          </tr>
          <tr>
            <td>2. Präferenz</td>
            <td valign="center" align="center">
            <input type="text" name="zwei"   id="m2" class='container'draggable="true" ondragstart="dragm2(event)" ondrop="dropm2(event)" ondragover="allowDropm2(event)"  style="border-style: solid;" data-max="1"></td>
            </tr>
          <tr>
            <td>3. Präferenz</td>
            <td valign="center" align="center" >
            <input type="text" name="drei"   id="m3" class='container'draggable="true" ondragstart="dragm3(event)" ondrop="dropm3(event)" ondragover="allowDropm3(event)"  style="border-style: solid;" data-max="1"></td>
            </tr>
          <tr>
            <td>4. Präferenz</td>
            <td valign="center" align="center" >
            <input type="text" name="vier"   id="m4" class='container'draggable="true" ondragstart="dragm4(event)" ondrop="dropm4(event)" ondragover="allowDropm4(event)"  style="border-style: solid;" data-max="1"></td>
            </tr>
          <tr>
        </table>
    </div>


</div>
{% next_button %}
{{ form.eins.errors }}
{{ form.zwei.errors }}
{{ form.drei.errors }}
{{ form.vier.errors }}

{% endblock %}


